
<div id="health-panel" class="">
  <button style="float: right" class="btn btn-link" data-toggle="editMode" data-bind="click: editHealth">
    <span class="glyphicon" data-bind="css: editModeIcon" aria-hidden="true"></span>
  </button>
  <div class="h4" style="padding-left:15px; padding-right: 15px;">
    Health <br />
    <small class="h5">Click on the health wheel to change max hit points or temporary hit points.</small>
  </div>
  <div class="health-edit-flip-container" data-bind="css: {healthEditFlipped: editMode}">
    <div class="health-edit-flipper">
      <div class="health-edit-front">
        <div class="health-flip-container" data-bind="css: {healthFlipped: deathSavesVisible()}">
          <div class="health-flipper">
            <div class="health-front">
              <div class="row">
                <div class="col-xs-6">
                <h4 style="text-align: center">Hit Points</h4>
                <div class="healtContainer">
                <div class="clickable" data-toggle="modal" data-bind="click: editHealth">
                <div style="padding: 10px; position: absolute; top:0px" data-bind="circleProgress: hpChart()"> </div>
                <!-- ko if: health().tempHitpointsRemaining() -->
                <div style="position: absolute; top:0px" data-bind="circleProgress: tempHpChart()"> </div>
                <!-- /ko -->
                </div>
                <plus-minus params="value: damageHandler,
                    max: health().totalHitpoints">
                </plus-minus>
                </div>
                </div>
                <div class="col-xs-6">
                  <h4 style="text-align: center">Hit Die</h4>
                  <div class="form-control hit-dice-list">
                    <!-- ko foreach: hitDiceList -->
                      <span data-bind="attr: { id: $index, name: $index },
                    css: hitDiceIcon, click: toggleHitDice"></span>
                    <!-- /ko -->
                    <!-- ko if: hitDiceList().length == 0 -->
                      <span class="hit-dice-list-empty-fill">&nbsp;</span>
                    <!-- /ko -->
                  </div>
                  <h4><center><small> Click on a die icon to track expended hit dice. </small></center></h4>
                </div>
              </div>
            </div>
            <div class="health-back">
              <div class="row">
                <div class="col-xs-12">
                  <h4><center> You are unconscious! </center></h4>
                </div>
                <div class="col-xs-6">
                    <h4 style="text-align: center">Death Save Successes</h4>
                  <div class="death-save-panel form-control hit-dice-list" data-bind="foreach: deathSaveSuccessList">
                    <span data-bind="attr: { id: $index, name: $index }, click: deathSaveSuccessHandler,
                  css: deathSaveSuccessIcon"></span>
                  </div>
                </div>
                <div class="col-xs-6">
                    <h4 style="text-align: center">Death Save Failures</h4>
                  <div class="death-save-panel form-control hit-dice-list" data-bind="foreach: deathSaveFailureList">
                    <span data-bind="attr: { id: $index, name: $index }, click: deathSaveFailureHandler,
                  css: deathSaveFailureIcon"></span>
                  </div>
                </div>
                <div class="col-xs-12" style="margin-top: 20px">
                  <button type="button" class="btn btn-info btn-block" data-bind="click: stabilize">Stabilize</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="health-edit-back">
        <form class="form-horizontal">
        <div class="form-group">
          <label for="name" class="col-sm-4 control-label">Max HP</label>
          <div class="col-sm-8">
            <input type="number" class="form-control"
              data-bind='textInput: editHealthItem().maxHitpoints, hasFocus: modifierHasFocus' min="0">
          </div>
        </div>
        <div class="form-group">
          <label for="bonus" class="col-sm-4 control-label">Damage</label>
          <div class="col-sm-8">
            <input type="number" class="form-control" min="0" data-bind='textInput: editHealthItem().damage'>
          </div>
        </div>
        <div class="form-group">
          <label for="name" class="col-sm-4 control-label">Temporary HP</label>
          <div class="col-sm-8">
            <input type="number" class="form-control"
              data-bind='textInput: editHealthItem().tempHitpoints' min="0">
          </div>
        </div>
        <div class="form-group ui-front">
          <label for="name" class="col-sm-4 control-label">Hit Dice Type</label>
          <div class="col-sm-8">
            <input class="form-control"
                   placeholder="D4"
                   data-bind="textInput: editHitDiceItem().hitDiceType, autocomplete: {
                        source: editHitDiceItem().hitDiceOptions,
                        onselect: setHitDiceType}">

          </div>
        </div>
      </form>
      </div>
  </div>
</div>
</div>


<!--
<div class="backEdit">
  <div class="row">
    <div class="col-xs-6">
    FoundMe
    </div>
  </div>
</div> -->

<!--End Panel-->
<!--HP Modal-->
<!-- ko if: modalOpen -->
	<div class="modal fade" id="viewHealth" tabindex="-1" role="dialog" aria-labelledby="viewHealthLabel"
  data-bind="modal: { open: modalOpen, onopen: modalFinishedAnimating, onclose: modalFinishedClosing}">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
            aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
					<h4 class="modal-title" id="healthLabel"> Edit your Hit Points.
					</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal">
					<div class="form-group">
						<label for="name" class="col-sm-2 control-label">Max HP</label>
						<div class="col-sm-10">
              <input type="number" class="form-control"
                data-bind='textInput: editHealthItem().maxHitpoints, hasFocus: modifierHasFocus' min="0">
						</div>
					</div>
					<div class="form-group">
						<label for="bonus" class="col-sm-2 control-label">Damage</label>
						<div class="col-sm-10">
							<input type="number" class="form-control" min="0" data-bind='textInput: editHealthItem().damage'>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="col-sm-2 control-label">Temporary HP</label>
						<div class="col-sm-10">
              <input type="number" class="form-control"
                data-bind='textInput: editHealthItem().tempHitpoints' min="0">
						</div>
					</div>
          <div class="form-group ui-front">
            <label for="name" class="col-sm-2 control-label">Hit Dice Type</label>
            <div class="col-sm-10">
              <input class="form-control"
                     placeholder="D4"
                     data-bind="textInput: editHitDiceItem().hitDiceType, autocomplete: {
                          source: editHitDiceItem().hitDiceOptions,
                          onselect: setHitDiceType}">

            </div>
          </div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">Done</button>
					</div>
				</form>
			</div><!-- Modal Body -->
		</div><!-- Modal Content -->
	</div><!-- Modal Dialog -->
</div><!-- Modal Fade -->
<!-- /ko -->
