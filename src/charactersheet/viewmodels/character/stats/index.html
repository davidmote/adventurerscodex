
<div id="health-panel">
  <edit-button params="toggleMode: editMode, clickAction: editHealth">
  </edit-button>
  <div class="h4" style="padding-left:15px; padding-right: 15px;">
    Health <br />
    <small class="h5">Click on the health wheel to change max hit points or temporary hit points.</small>
  </div>
  <div class="flip-container" data-bind="css: {flipped: editMode}">
    <div class="flipper">
      <div class="front">
        <div class="inner-flip-container" data-bind="css: {innerFlipped: deathSavesVisible()}">
          <div class="inner-flipper">
            <div class="inner-front">
              <div class="row">
                <div class="col-xs-6">
                <h4 style="text-align: center">Hit Points</h4>
                <div class="healtContainer">
                <div class="clickable" data-toggle="modal" data-bind="click: editHealth">
                <div style="padding: 10px; position: absolute; top:0px" data-bind="circleProgress: hpChart()"> </div>
                <!-- ko if: health().tempHitpointsRemaining() -->
                <div style="position: absolute; top:0px" data-bind="circleProgress: tempHpChart()"> </div>
                <!-- /ko -->
                </div>
                <div style="display: block; padding: 5px"></div>
                <plus-minus params="value: damageHandler,
                    max: health().totalHitpoints">
                </plus-minus>
                </div>
                </div>
                <div class="col-xs-6">
                  <h4 style="text-align: center">Hit Die</h4>
                  <div class="form-control hit-dice-list">
                    <!-- ko foreach: hitDiceList -->
                      <span data-bind="attr: { id: $index, name: $index },
                    css: hitDiceIcon, click: toggleHitDice"></span>
                    <!-- /ko -->
                    <!-- ko if: hitDiceList().length == 0 -->
                      <span class="hit-dice-list-empty-fill">&nbsp;</span>
                    <!-- /ko -->
                  </div>
                  <h4><center><small> Click on a die icon to track expended hit dice. </small></center></h4>
                </div>
              </div>
            </div>
            <div class="inner-back">
              <div class="row">
                <div class="col-xs-12">
                  <h4><center>
                    <!-- ko if: rip()-->
                    <span class="text-danger">You are dead <span class="deathSaveFailureIcon"/></span>
                    <!-- /ko -->
                    <!-- ko if: !rip() -->
                    You are unconscious!
                    <!-- /ko -->
                  </center></h4>
                </div>
                <div class="col-xs-6">
                    <h4 style="text-align: center">Death Save Successes</h4>
                  <div class="death-save-panel form-control hit-dice-list" data-bind="foreach: deathSaveSuccessList">
                    <span data-bind="attr: { id: $index, name: $index }, click: deathSaveSuccessHandler,
                  css: deathSaveSuccessIcon"></span>
                  </div>
                </div>
                <div class="col-xs-6">
                    <h4 style="text-align: center">Death Save Failures</h4>
                  <div class="death-save-panel form-control hit-dice-list" data-bind="foreach: deathSaveFailureList">
                    <span data-bind="attr: { id: $index, name: $index }, click: deathSaveFailureHandler,
                  css: deathSaveFailureIcon"></span>
                  </div>
                </div>
                <div class="col-xs-12" style="margin-top: 20px">
                  <button type="button" class="btn btn-block" data-bind="{click: stabilize, css: rip() ? 'btn-danger' : 'btn-info'}">
                    <!-- ko if: rip() -->
                    Revive
                    <!-- /ko -->
                    <!-- ko if: !rip() -->
                    Stabilize
                    <!-- /ko -->
                    </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="back">
        <form class="form-horizontal" data-bind="submit: editHealth">
        <div class="form-group">
          <label for="name" class="col-sm-4 control-label">Max HP</label>
          <div class="col-sm-8">
            <input type="number" class="form-control"
              data-bind='textInput: editHealthItem().maxHitpoints, hasFocus: modifierHasFocus' min="0">
          </div>
        </div>
        <div class="form-group">
          <label for="bonus" class="col-sm-4 control-label">Damage</label>
          <div class="col-sm-8">
            <input type="number" class="form-control" min="0" data-bind='textInput: editHealthItem().damage'>
          </div>
        </div>
        <div class="form-group">
          <label for="name" class="col-sm-4 control-label">Temporary HP</label>
          <div class="col-sm-8">
            <input type="number" class="form-control"
              data-bind='textInput: editHealthItem().tempHitpoints' min="0">
          </div>
        </div>
        <div class="form-group ui-front">
          <label for="name" class="col-sm-4 control-label">Hit Dice Type</label>
          <div class="col-sm-8">
            <input class="form-control"
                   placeholder="D4"
                   data-bind="textInput: editHitDiceItem().hitDiceType, autocomplete: {
                        source: editHitDiceItem().hitDiceOptions,
                        onselect: setHitDiceType}">
          </div>
        </div>
        <button type="submit" style="display: none" />
      </form>
      </div>
  </div>
</div>
</div>
<!--End Panel-->
