<div id="health-pane">
  <flip-card params="{
        dataId: '1',
        collapsable: false,
        elementId: 'health-panel-card',
        tabId: tabId,
        context: {
          data: $data,
          tabId: tabId,
        }
      }">
    <div class="front">
      <div class="h4 card-title">
        Health <br />
        <small>Click on the health wheel to change max hit points or temporary hit points.</small>
      </div>
      <flip-card params="{
                dataId: '1',
                collapsable: false,
                elementId: 'healthContainer',
                tabId: context.tabId,
                editMode: context.data.deathSavesVisible(),
                defaultHeight: '450px',
                bubbleHeight: resizeCallback,
                context: {
                  data: context.data,
                  outerToggleCallback: toggleCallback,
                }
              }">
        <div class="front">
          <div class="row"
               data-bind="with: context.data">
            <div class="col-sm-6 col-md-12 col-lg-6">
              <h4>Hit Points</h4>
              <div class="clickable"
                   id="health-chart"
                   data-bind="click: $component.context.outerToggleCallback">
                <div class="hp-circle"
                     data-bind="circleProgress: hpChart()"> </div>
                <!-- ko if: health().tempHitpointsRemaining() -->
                <div class="hp-circle tempHp"
                     data-bind="circleProgress: tempHpChart()"> </div>
                <!-- /ko -->
              </div>
              <div id="health-buttons">
                <mini-plus-minus params="value: damageHandler,
                          max: health().totalHitpoints, hideUp: true">
                </mini-plus-minus>
                <mini-plus-minus params="value: damageHandler,
                          max: health().totalHitpoints, hideDown: true">
                </mini-plus-minus>
              </div>

            </div>
            <div class="col-sm-6 col-md-12 col-lg-6">
              <h4>Hit Die</h4>
              <div class="form-control hit-dice-list">
                <!-- ko foreach: hitDiceList -->
                <span data-bind="attr: { id: $index, name: $index },
                    css: hitDiceIcon, click: toggleHitDice"></span>
                <!-- /ko -->
                <!-- ko if: hitDiceList().length == 0 -->
                <span class="hit-dice-list-empty-fill">&nbsp;</span>
                <!-- /ko -->
              </div>
              <h4><center><small> Click on a die icon to track expended hit dice. </small></center></h4>
            </div>
          </div>
        </div>
        <div class="back">
          <div class="row"
               data-bind="with: context.data">
            <div class="col-xs-12">
              <h4><center>
                    <!-- ko if: rip()-->
                    <span class="text-danger">You are dead <span class="deathSaveFailureIcon"/></span>
                    <!-- /ko -->
                    <!-- ko if: !rip() -->
                    You are unconscious!
                    <!-- /ko -->
                  </center></h4>
            </div>
            <div class="col-sm-6 col-md-12 col-lg-6">
              <h4>Death Save Successes</h4>
              <div class="death-save-panel form-control hit-dice-list success"
                   data-bind="foreach: deathSaveSuccessList">
                <span data-bind="attr: { id: $index, name: $index }, click: deathSaveSuccessHandler,
                  css: deathSaveSuccessIcon"></span>
              </div>
            </div>
            <div class="col-sm-6 col-md-12 col-lg-6">
              <h4>Death Save Failures</h4>
              <div class="death-save-panel form-control hit-dice-list warning"
                   data-bind="foreach: deathSaveFailureList">
                <span data-bind="attr: { id: $index, name: $index }, click: deathSaveFailureHandler,
                  css: deathSaveFailureIcon"></span>
              </div>
            </div>
            <div class="col-xs-12"
                 id="stabilize">
              <button type="button"
                      class="btn btn-block"
                      data-bind="{click: stabilize, css: rip() ? 'btn-danger' : 'btn-info'}">
                    <!-- ko if: rip() -->
                    Revive
                    <!-- /ko -->
                    <!-- ko if: !rip() -->
                    Stabilize
                    <!-- /ko -->
                    </button>
            </div>
          </div>
        </div>
      </flip-card>
    </div>
    <div class="back">
      <div id="health-panel-form">
        <div class="h4 card-title">
          Health <br />
          <small class="h5">Click on the health wheel to change max hit points or temporary hit points.</small>
        </div>
        <health-form params="{
          data: context.data.health,
          hitDieData: context.data.hitDiceType,
          containerId: 'health-panel-form',
          showForm: editMode,
          toggle: toggleCallback,
          remove: ()=>{} }">
        </health-form>
      </div>
    </div>
  </flip-card>
</div>
</div>
</div>
<!--End Panel-->
