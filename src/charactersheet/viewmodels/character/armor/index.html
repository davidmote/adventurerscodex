<div id="armor-panel">
  <div class="h4">
      Armor<br />
      <small>Armor Class calculations are based on your equipped Armor, Shield, Magical Modifiers, and Dexterity.
             Be sure to Don your armor and/or shield so your AC will be calculated.
      </small>
  </div>
    <table class="table table-responsive table-ac-bordered table-hover" id="armorTable">
      <thead>
        <tr>
          <th id="armorTableEquippedHeader" data-bind="click: function(){sortBy('armorEquipped');}"
            class="">
          Equipped
          </th>
          <th id="armorTableArmorHeader" data-bind="click: function(){sortBy('armorName');}"
            class="">
            Armor
            <span data-bind="css: sortArrow('armorName')"></span>
          </th>
          <th id="armorTableTypeHeader" class=""
            data-bind="click: function(){sortBy('armorType');}">
            Type
            <span data-bind="css: sortArrow('armorType')"></span>
          </th>
          <th id="armorTableAcHeader" data-bind="click: function(){sortBy('armorClass');}"
            class="">
            Armor Class
            <span data-bind="css: sortArrow('armorClass')"></span>
          </th>
          <th class="">

          </th>
        </tr>
      </thead>
      <tbody>
      <!-- ko foreach: filteredAndSortedArmors -->
        <tr class="clickable expandRow" data-toggle="collapse"
              data-bind="attr:{'data-target': `#armor_list_${__id}`}">
            <td data-bind="click: $component.equipArmor">
              <div>
                <input type='checkbox'
                       style=""
                       class='pseudo-checkbox sr-only'
                       data-bind="checked: armorEquipped, attr: {id: `armorEquipped_${__id}`}"></input>
                <label data-bind="attr: {for: `armorEquipped_${__id}`}"
                       class='fancy-checkbox-label'>
              </label>
              </div>
            </td>
            <td><span data-bind="text: armorName"></span>&nbsp;
              <span data-bind="text: magicalModifierLabel, css: { badge: applyMagicalModifierLabel }">
              </span></td>
          <td><span data-bind="text: armorType"></span></td>
          <td><span data-bind="text: armorClass"></span></td>
          <td>
            <span data-toggle="collapse"
                  data-bind="attr:{'data-target': `#armor_list_${__id}`}"
                  class="rotate fa fa-chevron-left"></span>
          </td>
        </tr>
        <tr>
          <td colspan="5" style="padding: 0px; backgound-color: white !important; height: 100%">
            <flip-card params="{
                  dataId: $data.__id,
                  collapsable: true,
                  elementId: 'armor_list',
                  context: {
                    data: $data,
                    remove: $component.removeArmor,
                  }
                }">
              <div class="front">
                <div class="row" data-bind="with: context.data">
                  <div class="col-xs-12">
                    <div class="h4">
                      <span data-bind="text: armorName" id="armorPreviewNameLabel"></span>&nbsp;
                      <!-- ko if: armorEquipped() -->
                      <small>Equipped</small>
                      <!-- /ko -->
                    </div>
                  </div>
                  <div class="col-sm-5">
                    <table class="spellDetail table table-hover table-condensed table-ac-bordered">
                      <tbody>
                        <tr>
                          <th>Armor Class:</th>
                          <td><span data-bind="text: armorClass"></span></td>
                        </tr>
                        <tr>
                          <th>Type:</th>
                          <td><span data-bind="text: armorType"></span></td>
                        </tr>
                        <tr>
                          <th>Stealth:</th>
                          <td><span data-bind="text: armorStealth"></span></td>
                        </tr>
                        <tr>
                          <th>Weight:</th>
                          <td><span data-bind="text: armorWeightLabel"></span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-xs-7">
                      <p style="text-align:justify"
                           data-bind="html: armorDescriptionHTML"></p>
                  </div>
              </div>
            </div>
              <div class="back">
                <armor-form params="{
                  data: context.data,
                  containerId: elementId,
                  showForm: editMode,
                  toggle: toggleCallback,
                  remove: context.remove }">
                </armor-form>
              </div>
            </flip-card>
          </td>
        </tr>
      <!-- /ko -->
      </tbody>
      <tfoot>
        <tr>
          <td colspan="8">
            <div style="padding: 10px" id="add-armor" class="collapse">
            <armor-form params="{
              data: null,
              containerId: 'add-armor',
              showForm: $component.showAddForm,
              add: $component.addArmor,
              toggle: $component.toggleAddForm }">
            </armor-form>
          </div>
          <!-- ko ifnot: $component.showAddForm -->
          <center>
            <button type="button"
                    class="btn btn-default btn-sm btn-block"
                    id="weaponAddButton"
                    data-toggle="collapse"
                    data-target="#add-armor"
                    data-bind="click: toggleAddForm"><i class="fa fa-plus"></i> Add Armor</button>
            </center>
            <!-- /ko -->
          </td>
        </tr>
      </tfoot>
    </table>
</div>
