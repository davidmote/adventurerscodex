<div class="panel panel-default spellList collapse" style="margin-bottom: 0px;" data-bind="attr:{id: `spell_list_${spell.__id}`}, spellCard: {callback: collapseCallback}">

  <div class="panel-body spellDetails" style="position: relative;">
    <edit-button params="toggleMode: editMode, clickAction: ()=>{toggleEditSpell()}"></edit-button>
    <div class="flip-container" data-bind="css: {flipped:  editMode}, style: { height: elementHeight}">
      <div class="flipper">
        <div class="front" data-bind="with: spell, css: spell.spellSchool().toLowerCase()">
          <div class="h3" style="text-align: left">
            <span data-bind="text: spellNameLabel"></span>&nbsp;
            <small data-bind="text: spellSummaryLabel"></small>
            <button  class="btn btn-link btn-danger" data-bind="click: $parent.removeSpell" href="#">
                      <i class="fa fa-trash-o fa-color-hover"></i>
            </button>
          </div>
          <div class="row">
            <div class="col-sm-3">
              <table class="spellDetail table table-hover table-condensed table-ac-bordered" >
                <tbody>
                  <tr>
                    <th>Type:</th>
                    <td><span data-bind="text: spellType"></span></td>
                  </tr>
                  <!-- ko if: spellDamageLabel -->
                  <tr>
                    <th>Damage:</th>
                    <td><span data-bind="text: spellDamageLabel"></span></td>
                  </tr>
                  <!-- /ko -->
                  <tr>
                    <th>Casting Time:</th>
                    <td><span data-bind="text: spellCastingTime"></span></td>
                  </tr>
                  <tr>
                    <th>Range:</th>
                    <td><span data-bind="text: spellRange"></span></td>
                  </tr>
                  <tr>
                    <th>Duration:</th>
                    <td><span data-bind="text: spellDuration"></span></td>
                  </tr>
                  <tr>
                    <th>Components:</th>
                    <td><span data-bind="text: spellComponents"></span></td>
                  </tr>
                  <!-- ko if: spellMaterialComponents -->
                  <tr>
                    <td colspan="2"><i data-bind="text: spellMaterialComponents"></i></td>
                  </tr>
                  <!-- /ko -->
                </tbody>
              </table>
            </div>
            <div class="col-sm-9">

              <div class="col-xs-12 col-padded">
                <div style="text-align:justify" data-bind="html: spellDescriptionHTML"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="back" data-bind="with: currentEditItem, css: spell.spellSchool().toLowerCase()" style="padding: 10px">
          <form class="" data-bind="submit: $parent.toggleEditSpell">
            <div class="row">
            <div class="form-group col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellName" class="control-label">Name</label>
                <input type="text" class="form-control spellsEditNameInput" placeholder="Magic Missile" data-bind="textInput: spellName,
                  hasFocus: $parent.firstFormElementHasFocus">
            </div>
            <div class="form-group col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellLevel" class="control-label">Level</label>
                <input type="number" class="form-control spellsEditLevelInput" min="0" max="9" placeholder="1" data-bind="value: spellLevel">
            </div>
            <div class="form-group col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellSchool" class="control-label">School</label>
                <input class="form-control" id="spellsEditSchoolInput" placeholder="Abjuration" data-bind="textInput: spellSchool,
                autocomplete: { source: spellSchoolOptions,
                                onselect:  $parent.setSpellSchool }">
            </div>
            <div class="form-group  col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellType" class="ontrol-label">Type</label>
                <input class="form-control spellsEditTypeInput" placeholder="Automatic" data-bind="textInput: spellType,
                autocomplete: { source: spellTypeOptions,
                                onselect: $parent.setSpellType }">
            </div>
            <div data-bind="visible: spellType() == 'Savings Throw'">
              <div class="form-group  col-xs-6 col-sm-4 col-md-3 col-lg-3">
                <label for="spellType" class="control-label">Save Attr</label>
                  <input class="form-control spellsEditSaveAttrInput" placeholder="Str" data-bind="textInput: spellSaveAttr,
                  autocomplete: { source: spellSaveAttrOptions,
                                  onselect: $parent.setSpellSaveAttr }">
              </div>
            </div>
            <div class="form-group col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellDmg" class="control-label">Damage</label>
                <input type="text" class="form-control spellsEditDamageInput" placeholder="1d4 + 1" data-bind="value: spellDmg">
            </div>

            <div class="form-group  col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellCastingTime" class="control-label">Cast Time</label>
                <input class="form-control" id="spellsEditCastTimeInput" placeholder="1 action" data-bind="textInput: spellCastingTime,
                autocomplete: { source: spellCastingTimeOptions,
                                onselect: $parent.setSpellCastingTime }">
            </div>
            <div class="form-group col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellRange" class="control-label">Range</label>
                <input class="form-control" id="spellsEditRangeInput" placeholder="1 mile" data-bind="textInput: spellRange,
                    autocomplete: { source: spellRangeOptions,
                                    onselect: $parent.setSpellRange }">
            </div>
            <div class="form-group  col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellDuration" class="control-label">Duration</label>
                <input class="form-control" id="spellsEditDurationInput" placeholder="1 day" data-bind="textInput: spellDuration">
            </div>
            <div class="form-group col-xs-6 col-sm-4 col-md-3 col-lg-3">
              <label for="spellComponents" class="control-label">Components</label>
                <input class="form-control" id="spellsEditComponentsInput" placeholder="V, S, M" data-bind="textInput: spellComponents,
                            autocomplete: { source: spellComponentsOptions,
                                            onselect: $parent.setSpellComponents }">
            </div>

            <div class="form-group col-sm-6 col-md-6 col-lg-6">
              <label for="spellMaterialComponents" class="control-label">Material Components</label>
                <input type="text" class="form-control spellsEditMaterialComponentsInput" placeholder="Feather" data-bind="textInput: spellMaterialComponents">
            </div>
            <!--  ko if: $parent.preparedRowVisibleEdit($data) -->
            <div class="col-xs-12">
              <hr />
              <div class="row form-horizontal">
              <div class="col-sm-4">
                <input id="spellPrepared" type='checkbox' class='pseudo-checkbox sr-only' data-bind="checked: spellPrepared, disable: spellAlwaysPrepared"></input>
                <label for="spellPrepared" class='control-label fancy-checkbox-label'>
                    Prepared
                </label>
              </div>

              <div class="col-sm-4">
                <input id="spellAlwaysPrepared" type='checkbox' class='pseudo-checkbox sr-only' data-bind="checked: spellAlwaysPrepared, disable: spellPrepared"></input>
                <label for="spellAlwaysPrepared" class='control-label fancy-checkbox-label'>
                    Always Prepared&nbsp;<span class="fa fa-info-circle hidden-xs" style="cursor:pointer;"
                    data-bind="popover: { content: $parent.alwaysPreparedPopoverText }">
                </label>
              </div>

              <div class="col-sm-4">
                <input id="spellIsRitual" type='checkbox' class='pseudo-checkbox sr-only' data-bind="checked: isRitual"></input>
                <label for="spellIsRitual" class='control-label fancy-checkbox-label'>
                    Ritual
                </label>
              </div>
            </div>
            <hr />
            </div>
            <!-- /ko -->
            <div class="form-group col-xs-12">
              <label for="spellDescription" class="control-label">Description</label>
                <textarea style="position: relative" type="password" class="form-control spellsEditDescriptionTextarea" placeholder="You create three glowing ..." data-bind="value: spellDescription" rows="6"></textarea>
            </div>
            <div class="form-group col-xs-12">
            <button type="button" class="btn btn-default btn-sm" data-toggle="collapse" data-bind="click: $parent.cancelEditSpell">Cancel</button>
            <button type="submit" class="btn btn-primary btn-sm" >Update</button>
          </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
