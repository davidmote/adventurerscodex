<div>
	<div class="h4">
		Tracked Features, Feats, and Traits<br />
		<small>Configure to reset on a short or long rest.</small>
	</div>
	<table class="table table-responsive" style="border-width:0px">
		<thead>
			<tr>
				<th>Name
				</th>
				<th colspan="3">Resets&nbsp;on
				</th>
				<th></th>
				<th>Used</th>
				<th>
					<button class="btn btn-link" data-bind="{click: collapseAll}">
			        <span class="fa fa-minus"></span></button>
				</th>
			</tr>
		</thead>
		<tbody>
			<!-- ko foreach: filteredAndSortedTrackables, as: trackable -->
			<tr data-bind="with: $data.tracked()">
				<td style="padding: 4px;"><span data-bind="html: $component.shortName($parent.name)"></span>
				</td>
				<td style="padding: 4px;">
					<!-- ko if: $component.needsResetsOnImg($data) -->
					<img class="action-bar-icon" data-bind="attr: { src: $component.resetsOnImgSource($data) }">
					</img>
					<!-- /ko -->
				</td>
				<td style="padding: 4px;">
					<mini-plus-minus params="value: used,
					max: maxUses, hideUp: true">
					</mini-plus-minus>
				</td>
				<td style="padding: 4px;">
					<mini-plus-minus params="value: used,
					max: maxUses, hideDown: true">
					</mini-plus-minus>
				</td>
				<td style="padding: 4px;">
					<div style="padding: 10px" data-bind="barProgress: $component.mapToChart($data)"> </div>
				</td>

				<td style="padding: 4px;">
					<span data-bind="text: parseInt(maxUses()) - parseInt(used())"></span>&nbsp;/&nbsp;<span data-bind=" text: maxUses"></span>
				</td>
				<td style="padding: 4px;">
					<span data-toggle="collapse" data-bind="attr:{'data-target': `#tracked_${__id}`}" class="rotate fa fa-chevron-left"></span>
				</td>
			</tr>
			<tr>
				<td colspan="8">
				<flip-card params="{
					    dataId: $data.tracked().__id,
							collapsable: true,
							elementId: 'tracked',
							context: {
								viewData: $data,
								nameMeta: $component.nameMeta
							}
						}">
					<div class="front">
						<div class="h4" style="text-align: left">
							<span data-bind="text: context.viewData.name"></span>
							<small data-bind="text: context.nameMeta(context.viewData)"></small>
						</div>
						<p style="text-align:justify" data-bind="markdownPreview: context.viewData.description"></p>
					</div>
					<div class="back" >
							<div class="h4" style="text-align: left">
								<span data-bind="text: context.viewData.name"></span>
								<small data-bind="text: context.nameMeta(context.viewData)"></small>
							</div>
							<tracked-form params="{
								data: context.viewData.tracked,
								containerId: elementId,
								showForm: editMode,
								toggle: toggleCallback,
								 }">
							</tracked-form>
				</flip-card>
			</td>
			</tr>
			<!-- /ko -->
			<!-- ko if: filteredAndSortedTrackables().length == 0 -->
			<tr class="clickable">
				<td colspan="12" class="text-center">
					No Tracked Features, Feats, or Traits to display.
				</td>
			</tr>
			<!-- /ko -->
		</tbody>
	</table>
</div>
