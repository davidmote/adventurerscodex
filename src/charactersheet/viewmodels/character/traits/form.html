<form data-bind="submit: $component.save">
  <!-- ko ifnot: $component.data -->
  <div class="h4" style="padding-top: 5px;">
    New Trait
  </div>
  <!-- /ko -->
  <div data-bind="with: currentEditItem">
    <div class="form-group">
      <label for="name"
             class="control-label">Name</label>
      <input type="text"
             class="form-control traitNameInput"
             placeholder="Trance"
             data-bind="textInput: name,
             hasFocus: $component.formElementHasFocus,
             autocomplete: {
               source: $component.traitsPrePopFilter,
               onselect: $component.populateTrait }">
    </div>

    <div class="form-group">
      <label for="race"
             class="control-label">Race</label>
      <input type="text"
             class="form-control traitRaceInput"
             placeholder="Elf"
             data-bind="textInput: race,
             autocomplete: {
               source: $component.raceOptions,
               onselect: $component.populateRace }">
    </div>
    <div class="form-group">
      <label for="npcDescription"
             class="control-label">Description</label>
      <textarea type="text"
                rows="6"
                class="form-control"
                id="traitEditDescriptionTextarea"
                data-bind='value: description, markdownEditor: true'></textarea>
    </div>
    <div class="form-group">
      <input type='checkbox'
             style=""
             class='pseudo-checkbox sr-only'
             data-bind="checked: isTracked, attr: {id: `${$component.containerId}_tracked`}"></input>
      <label data-bind="attr: {for: `${$component.containerId}_tracked`}"
             class='fancy-checkbox-label'>Tracked?
    </label>&nbsp;<span class="fa fa-info-circle"
            style="cursor:pointer;"
            data-bind="popover: { content: $component.popoverText }"></span>
    </div>
  </div>
  <!-- ko if: currentEditItem().isTracked() -->
  <div data-bind="with: $component.currentEditTrackedItem">
    <fieldset class="fieldset-bordered">
      <legend>Tracked</legend>
      <div class="form-group">
        <label for="bonus"
               class="control-label">Max</label>
        <input type="number"
               class="form-control"
               id="max"
               min="1"
               data-bind='textInput: maxUses'>
      </div>
      <div class="form-group">
        <label class="control-label">Resets on...</label>
        <div class="btn-group btn-group-justified btn-group-sm"
             role="group">
          <label class="btn btn-default btn-sm"
                 data-bind="css: { active: resetsOn() == 'short'}">
          <input type="radio" class="hide-block"
          name="traitureResetsOnShort" value="short" data-bind="checked: resetsOn"/>
          <img class="action-bar-icon" data-bind="attr: { src: $component.meditationWhite }"></img>
          &nbsp;&nbsp;&nbsp;Short Rest
        </label>
          <label class="btn btn-default  btn-sm"
                 data-bind="css: { active: resetsOn() == 'long'}">
          <input type="radio" class="hide-block"
          name="traitureResetsOnLong" value="long" data-bind="checked: resetsOn"/>
          <img class="action-bar-icon" data-bind="attr: { src: $component.campingTentWhite }"></img>
          &nbsp;&nbsp;&nbsp;Long Rest
        </label>
        </div>

    </fieldset>
    </div>
    <!-- /ko -->
    <!-- ko ifnot: addForm -->
    <div>
      <button class="btn btn-sm btn-danger"
              type="button"
              data-bind="click: $component.remove">Delete</button>
      <div style="float: right">
        <button class="btn btn-sm btn-default"
                type="button"
                data-bind="click: $component.cancel">Cancel</button>
        <button class="btn btn-sm btn-primary"
                type="submit">Save</button>
      </div>
    </div>
    <!-- /ko -->
    <!-- ko if: addForm -->
    <div>
      <center>
        <div style="float: right">
          <button type="button"
                  class="btn btn-default btn-sm"
                  id="proficiencyAddCancelButton"
                  data-bind="click: $component.cancel">Cancel</button>
          <button type="submit"
                  class="btn btn-primary btn-sm">Add Feature</button>
        </div>
      </center>
    </div>
    <!-- /ko -->
    <p class="text-muted text-left ogl-disclaimer"
       data-bind='visible: shouldShowDisclaimer'>
      <sm><i>This data is distributed under the
            <a href='http://media.wizards.com/2016/downloads/DND/SRD-OGL_V5.1.pdf'
              target='_blank'>
              OGL</a><br/>
              Open	Game	License	v	1.0a	Copyright	2000,	Wizards	of	the	Coast,	LLC.
            </i>
        <sm>
    </p>
</form>
